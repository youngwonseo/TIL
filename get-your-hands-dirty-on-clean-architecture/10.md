# 아키텍처 경계 강제하기

* 일정 규모 이상의 프로젝트에서는 시간이 지나면서 아키텍처가 서서히 무너짐
  * 계층간 경계가 약화, 코드는 점점 테스트하기 어려움, 새로운 기능을 구현하는데 점점 더 많은 시간이 소요됨
* 이번 장에서는 아키텍처 내의 경계를 강제하는 방법과 아키텍처 붕괴에 맞서 싸우기 위한 방법을 알아봄

## 경계와 의존성

![그림]()

* 그림은 육각경 아키텍처의 


## 접근 제한자

* 자바에서 제공하는 가장 기본적인 도구인 접근 제한자 부터 시작
  * 자바에는 public, protected, private, package-private(default)가 존재
* 여기서 중요한것은 package-private
  * package-private은 패키지를 모듈로 만들고 패키지 내에서만 서로 접근가능하도록 만듬
  * 모듈의 진입점에 해당하는 클래스만 public으로 구성
  * 의존성이 잘못된 방향을 가르켜서 의존성 규칙을 위반할 위험을 줄임
* 
* package-private는 몇 개 정도의 클래스로만 이루어진 작은 모듈에서 효과적
* 

## 컴파일 후 체크

* public으로 인해 의존성 방향이 잘못되더라도 컴팔일러는 이를 허용
* 이를 막기 위해 컴파일 후 체크(post-compile check)를 도입하는것
* 자바에는 이러한 툴로 [ArchUnit](https://www.archunit.org/)이 존재

## 빌드 아티팩트

* 위 내용에서 아키텍처 경계를 구분하는 유일한 도구는 패키지
  * 모든 코드가 같은 모놀리식 빌드 아티팩트의 일부

* 빌드 도구의 중요한 기능 중 하나는 의존성 해결
  * 어떤 코드 베이스가 빌드 아티팩트로 변환하기 위해서 빌드 도구가 가장 먼저 할 일은 코드베이스가 의존하고 있는 모든 아티팩트가 사용 가능한지 확인하는것
  * 만약 사용 불가능하면 아티팩트 리포지토리로 부터 가져오기를 시도
  * 이것이 실패하면 컴파일하기전에 에러와 함께 빌드가 실패
* 이를 활용해 모듈과 아키텍처간 의존성을 강제할 수 있음



## 유지보수 가능한 소프트웨어를 만드는데 어떻게 도움이 될까?
