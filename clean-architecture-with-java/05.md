# 웹 어댑터 구현하기

* 오늘날 애플리케이션은 대부분 웹 인터페이스를 제공
* 예로들면 HTTP API
* 우리가 목표로 하는 아키텍처에서 외부 세계와의 모든 커뮤니케이션은 어댑터를 통함
* 여기서는 웹 인터페이스를 제공하는 어댑터의 구현 방법을 살펴봄

## 의존성 역전

[그림]

* 웹 어댑터는 인커밍 어댑터
  * 컨트롤러에서 외부의 요청을 받고 애플리케이션 계층의 서비스로 흐름
* 애플리케이션 계층은 웹 어댑터가 통신할 수 있는 포트를 제공
  * 서비스는 이 포트를 구현
  * 어댑터는 이 포트를 호출
* 의존성 역전 원칙이 적용된 것을 알 수 있음
  * 제어의 흐름이 컨트롤러 -> 서비스를 호출
* 그렇다면 왜 어댑터와 유스케이스사이에 간접계층(포트)이 필요할까?
  * 애플리케이션 코어가 외부세계와 통신할 수 있는 곳에 대한 명세가 포트
  * 포트를 적절한곳에 위치시키면 외부와 어떤 통신이 일어나고 있는지 정확히 파악가능, 유지보수시 중요
* 컨트롤러에서 서비스를 호출하는 지름길을 사용하고 싶지만 이 지름길에 대해서는 [11장](./11.md)에서 언급
* 웹 소켓처럼 실시간으로 데이터를 애플리케이션 코어 -> 웹 어댑터 -> 사용자의 UI는 어떻게 처리할까?
  * 이 경우는 반드시 포트가 필요
  * 위 경우는 아웃고잉 포트
  * 아래 그림처럼 웹 어댑터가 인커밍 어댑터와 아웃커밍 어댑터, 즉 2가지 역할을 하게됨

[그림]

## 웹 어댑터의 책임

* 웹 어댑터는 다음과 같은 책임이 있음
  1. HTTP 요청을 자바 객체로 매핑
  2. 권한 검사
  3. 입력 유효성 검증
  4. 입력을 유스케이스의 입력 모델로 매핑
  5. 유스케이스 호출
  6. 유스케이스의 출력을 HTTP로 매핑
  7. HTTP 응답을 반환
* 웹 어댑터의 입력 모델을 유스케이스의 입력 모델로 변활할 수 있다는 것을 검증해야함
* 이 과정에서 한 군데라도 문제가 생기면 예외를 던지고 웹 어댑터는 에러와 함께 적절한 메시지를 보여야함

## 컨트롤러 나누기

* 스프링MVC에서는컨트롤러 클래스를 생성가능
* 정해진 패키지 구조를 지키며 여러개의 컨트롤러를 생성
* 그럼 몇 개바를 만들어야 될까?
  * 적은것 보다는 많은 것이 나음
  * 하나의 클래스는 최소한의 코드를 유지해야함
* 컨트롤러 명과 서비스명도 잘지어야 함
  * ㅇㅇ

## 유지보수 가능한 소프트웨어를 만드는데 어떻게 도움이 될까?

* 
* 
